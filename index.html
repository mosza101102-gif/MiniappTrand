<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TrendBot Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h3>TrendBot Control Panel</h3>

<label>Symbol: <input id="symbol" value="GC=F"></label><br><br>

<label>Timeframe:
<select id="tf">
  <option value="1m">1m</option>
  <option value="5m" selected>5m</option>
  <option value="10m">10m</option>
</select>
</label><br><br>

<label>RSI BUY <= <input id="rsi_buy" type="number" value="30"></label><br><br>
<label>RSI SELL >= <input id="rsi_sell" type="number" value="70"></label><br><br>
<label>RSI CLOSE <input id="rsi_close" type="number" value="50"></label><br><br>

<button onclick="sendCmd('START BOT')">▶️ START BOT</button><br><br>
<button onclick="sendCmd('STOP BOT')">⏹ STOP BOT</button>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();     // WAJIB di HP
  tg.expand();

  function sendCmd(cmd) {
    const data = {
      cmd: cmd,
      symbol: document.getElementById("symbol").value,
      tf: document.getElementById("tf").value,
      rsi_buy: Number(document.getElementById("rsi_buy").value),
      rsi_sell: Number(document.getElementById("rsi_sell").value),
      rsi_close: Number(document.getElementById("rsi_close").value)
    };

    tg.sendData(JSON.stringify(data));
    tg.close();   // WAJIB di HP
  }
</script>

</body>
</html>
